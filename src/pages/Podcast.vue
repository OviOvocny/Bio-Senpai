<template>
  <section>
    <div class="podcast-logo">
      <svg class="yoiSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1341.222 212"><path id="YOIMIRU" fill-rule="evenodd" class="cls-1" d="M103.6 15.2l10.8 26q3.2 9.2 7 20t7 19.2h1.2q1.2-9.2 3-20.2t2.6-21l3.6-22zM84.6 172a62.4 62.4 0 0 0 10.6-16.4q4-6 2.8-10a18.28 18.28 0 0 0-.6-4.4 26.26 26.26 0 0 0-2.6-6l-63.2-124L0 8.8 16.8 192l36.4 2.8a83.15 83.15 0 0 0 8.4-4.4q4-2.4 8.4-5.6A67.5 67.5 0 0 0 84.6 172zM186.4 70.8q-6.8 26-13 46.2t-12.2 35.8a272.53 272.53 0 0 1-12 27.2 238.6 238.6 0 0 1-12 20.8l58.4 4.4 12-184.4h-8zM261 59.6a45.73 45.73 0 0 0-12.4 16.2 73.8 73.8 0 0 0-6.2 21.6 101.3 101.3 0 0 0-.4 23.8q2.8 28 15.6 45.6t34.4 15.6q20.4-2 30.2-20.6t7-48.6a121.6 121.6 0 0 0-4.6-23.2 72.96 72.96 0 0 0-9.4-20 45.1 45.1 0 0 0-14.6-13.8 33.78 33.78 0 0 0-19.8-4.2q-12 1.2-19.8 7.6zm133-41.2l-52.8-3.6a105.56 105.56 0 0 1 33 27q13.4 16.6 19.8 39.4V18.4zM197.2 7.2v36q20-23.6 52-33.2zM394 204v-49.2a94.03 94.03 0 0 1-12.8 27.4 129.2 129.2 0 0 1-18.8 21.8H394zm-196.8 0h10.4q-2.4-2.8-5-5.4t-5.4-5.8V204zM536.4 4.8a30.97 30.97 0 0 1-12.2 10.8q-7.8 4-18.2 3.2a30.73 30.73 0 0 1-27.2-15.2l-90-3.2 10.4 202 67.6 3.6 7.6-164.4 62 3.2-8.4 164.8 48 2.4V6.4zm38.4 57.6h1.2a79.88 79.88 0 0 1 6.2-10.2 59.23 59.23 0 0 1 24.2-19.6 64.67 64.67 0 0 1 20-5q18-2 31.8 4.6A49.85 49.85 0 0 1 680 52.4h.8q8-16.4 20.8-24.8a68.36 68.36 0 0 1 14.8-8.6 77.3 77.3 0 0 1 18.4-5 59.83 59.83 0 0 1 24.4 1.8A48.54 48.54 0 0 1 780 28.4l1.2-21.2L571.6 14l-1.2 30.4zm67.6 47.6q-2.4-16.8-10-26.6t-21.6-7.8q-10.8.8-16.2 8.4a49.42 49.42 0 0 0-7.4 14.4 28.66 28.66 0 0 0-.8 7v7.4l10 82.4 56-1.2zm109.2-10.4q-2.4-19.2-10.2-29.2T720 62q-10.4.8-16 7.6a37.14 37.14 0 0 0-7.6 15.2 43.47 43.47 0 0 0 0 14.4l10.4 92.8 56-1.6zM916.4 4.8a31 31 0 0 1-12.2 10.8q-7.8 4-18.2 3.2a30.73 30.73 0 0 1-27.2-15.2l-90-3.2 10.4 202 67.6 3.6 7.6-164.4 62 3.2-8.4 164.8 48 2.4V6.4zm83.6 58q1.2-19.6 1.4-34t.2-26.4l-54-2.4 26 198.8 19.6 1.2zm133.6-6A177.77 177.77 0 0 0 1116 54q-19.2-.8-31.6 8T1068 86.4a23.28 23.28 0 0 0-1.4 7 55.53 55.53 0 0 1-1 7.8l-4.4 102 92.4 3.6L1144 8h-8zM1060 5.2V34h2a56.83 56.83 0 0 1 8.4-16 94.82 94.82 0 0 1 10.8-12zm237.6 187.2l-1.2-27.2h-.8a80.78 80.78 0 0 1-8.2 9.4 66.14 66.14 0 0 1-12.6 9.6 69.22 69.22 0 0 1-40.8 9.4 79.07 79.07 0 0 1-27-6 51.77 51.77 0 0 1-20.6-15.8q-8.4-10.6-12.8-26.6t-3.2-38l4.4-93.6h-20L1144 208l197.2-6.4v-7.2zm-19-51.8q7.8-6.6 10.6-13.4a26.77 26.77 0 0 0 2.8-12.8l4.8-105.2-62 2.4-4.4 88.4q-.8 21.2 5.8 33.4t22.2 13q12.4.8 20.2-5.8z"/></svg>
      <h2>{{wtf}}</h2>
      <p>
        Yoimiru je podcast převážně o anime. Pravidelně se v náhodnou dobu scházíme a jdeme se pobavit o našich zážitcích při sledování tohoto média.
        Vždy se snažíme mluvit k věci a zbytečně epizody nenatahovat. To je lež. Smějeme se každé blbosti a navzájem po sobě házíme plyšáky.
      </p>
      <router-link to="/tym/podcast">
        <btn>Tým podcastu</btn>
      </router-link>
      <a href="//akari.in/yoimiru">
        <btn>Naše poznámky (NSFW)</btn>
      </a>
    </div>


    <div class="podcast-episode" v-for="ep in podcasts" @click="playEpisode(ep)">
      <h3>{{ep.epName}}</h3>
      <p v-html="ep.epDesc"></p>
      <btn icon="play" @click="playEpisode(ep)">Přehrát</btn>
    </div>
  </section>
</template>

<script>
import API from 'api'

let wtfs = [
  'Podcast aneb pár šílenců mluví o anime a všem dalším, co je napadne...',
  'Podcast aneb pár šílenců se pokouší neumřít smíchy...',
  'Podcast aneb pár šílenců šíří hodinu svého smíchu internetem...',
  'Podcast aneb pár šílenců se hádá u mikrofonu o existenci příběhu v ecchi...'
]

export default {
  submenu: ['Projekty', 'Návrhy', 'Podcast'],
  data () {
    return {
      podcasts: []
    }
  },
  created () {
    this.fetchData()
  },
  computed: {
    wtf () {
      return wtfs[Math.floor(Math.random() * wtfs.length)]
    }
  },
  methods: {
    fetchData () {
      this.$emit('error', false)
      new API('podcasts')
        .byIdDesc()
        .call()
        .then(res => {
          this.podcasts = res.data
        })
        .catch(err => {
          this.$emit('error', err)
        })
    },
    playEpisode (ep) {
      this.$emit('update:audio', `static/yoimiru/${ep.file}`)
      this.$emit('update:audio-meta', ep)
    }
  }
}
</script>

<style scoped lang="stylus">
.podcast-logo
  text-align center
  margin-bottom 3em

.yoiSVG
  stroke hsl(150, 80%, 60%)
  stroke-width 0
  fill transparent
  stroke-dasharray 1200
  stroke-dashoffset 0
  animation draw 3s, fadeIn 1s .5s forwards
  max-width 400px
  transition stroke-dashoffset 2s, stroke-width 2s, stroke 2s
  &:hover
    stroke transparent
    stroke-width 15px
    stroke-dashoffset 1200

@keyframes draw
  from
    stroke transparent
    stroke-dashoffset 1200
    stroke-width 15px
    filter drop-shadow(0 0 1em hsl(150, 80%, 60%))

@keyframes fadeIn
  to
    fill alpha(white, 70%)


.podcast-episode
  cursor pointer
  padding .5em 1em 1em 1em
  margin 1em 0
  border-radius 15px
  border 2px solid lighten(#1e2430, 10%)
  transition border-color .3s
  &:hover
    border-color hsl(150, 80%, 40%)

.tiles
  padding 1em
  left 0
  right 0
  margin 1em auto
  will-change width
  transition width 0.5s
.hidden
  opacity 0
  transition opacity .2s
</style>
